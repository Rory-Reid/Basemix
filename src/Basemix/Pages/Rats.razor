@page "/rats"
@using Basemix.Lib.Rats

<CreateHeader OnCreate="CreateRat"/>

<MudPaper Class="mx-10" Elevation="0" Outlined="false">

    <MudText Typo="Typo.h3">Rats</MudText>

    <MudText Typo="Typo.body1">
        Click any rat to view the rat's profile.
    </MudText>

    <MudTextField @bind-Value="SearchTerm" Immediate="true" DebounceInterval="500" OnDebounceIntervalElapsed="Search"
                  Label="Search for a rat here" Variant="Variant.Outlined"
                  Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.Search"
                  AdornmentColor="Color.Primary"/>

    <MudCheckBox T="@bool" Value="@Filter.RatsHideDeceased" ValueChanged="SetDeceased"
                 Label="Hide deceased" Color="Color.Primary">
    </MudCheckBox>
    <MudCheckBox T="@bool" Value="@Filter.RatsHideUnowned" ValueChanged="SetUnowned"
                 Label="Hide unowned" Color="Color.Primary">
    </MudCheckBox>

    <MudTable T="RatSearchResult" Items="RatsList" Hover="true" RowClass="cursor-pointer" Breakpoint="Breakpoint.None"
              OnRowClick="@(e => OpenRatProfile(e.Item?.Id ?? throw new Exception("Bad")))">
        <HeaderContent>
            <MudTh>Name</MudTh>
            <MudTh>Sex</MudTh>
            <MudTh>DoB</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd>
                <strong>@(context.Name ?? "Unnamed")</strong>
            </MudTd>
            <MudTd>@(context.Sex.ToString() ?? "-")</MudTd>
            <MudTd>@(context.DateOfBirth.ToString() ?? "-")</MudTd>
        </RowTemplate>
    </MudTable>

</MudPaper>